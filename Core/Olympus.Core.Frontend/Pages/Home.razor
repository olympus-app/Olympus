@namespace Olympus.Core.Frontend.Pages

@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@using Olympus.Core.Frontend.Authorization

@* @using Olympus.Frontend.Interface.Services *@
@* @using Olympus.Frontend.Interface.Theming *@

@* @inject ApplicationSettings application *@
@* @inject ThemingService ThemingService *@
@* @inject IFormFactor FormFactor *@

<PageTitle>Olympus</PageTitle>

<h1>Hello, world!</h1>

@* Welcome to your new app running on <em>@factor</em> using <em>@platform</em>. *@

<br />
<br />

<AuthorizeView>
	<Authorized>
		<div style="color: green; font-weight: bold;">
			Olá, @context.User.Identity?.Name!
			<button @onclick="Logout">Sair</button>
		</div>
		@if (context.User.CheckPermissions(CorePermissions.Users.Read))
		{
			<div class="alert alert-info">Você TEM CorePermissions.Users.Read</div>
		}
		else
		{
			<div class="alert alert-info">Você NÃO tem CorePermissions.Users.Read</div>
		}
		@if (context.User.CheckPermissions(CorePermissions.Users.Write))
		{
			<div class="alert alert-info">Você TEM CorePermissions.Users.Write</div>
		}
		else
		{
			<div class="alert alert-info">Você NÃO tem CorePermissions.Users.Write</div>
		}
	</Authorized>
	<NotAuthorized>
		<div style="color: red;">
			Você não está logado.
			<a href="login">Ir para Login</a>
		</div>
	</NotAuthorized>
</AuthorizeView>

<br />
<br />

<CheckPermissions One="CorePermissions.Users.Read">
	<Authorized>
		<div class="alert alert-success">
			Você TEM CorePermissions.Users.Read
		</div>
	</Authorized>
	<NotAuthorized>
		<div class="alert alert-warning">
			Você NÃO tem CorePermissions.Users.Read
		</div>
	</NotAuthorized>
</CheckPermissions>

<br />
<br />

<CheckPermissions One="CorePermissions.Users.Write">
	<Authorized>
		<div class="alert alert-success">
			Você TEM CorePermissions.Users.Write
		</div>
	</Authorized>
	<NotAuthorized>
		<div class="alert alert-warning">
			Você NÃO tem CorePermissions.Users.Write
		</div>
	</NotAuthorized>
</CheckPermissions>

@* <RadzenButton Text="Default" Click="@(async () => await ThemingService.ApplyStyle(ThemingStyles.Default))" />
<RadzenButton Text="Bootstrap" Click="@(async () => await ThemingService.ApplyStyle(ThemingStyles.Bootstrap))" />
<RadzenButton Text="MaterialDesign" Click="@(async () => await ThemingService.ApplyStyle(ThemingStyles.MaterialDesign))" />
<RadzenButton Text="MaterialYou" Click="@(async () => await ThemingService.ApplyStyle(ThemingStyles.MaterialYou))" />
<RadzenButton Text="FluentUI" Click="@(async () => await ThemingService.ApplyStyle(ThemingStyles.FluentUI))" />

<br />
<br />

<RadzenButton Text="Default" Click="@(async () => await ThemingService.ApplyColors(ThemingColors.Default))" />
<RadzenButton Text="Eleuthia" Click="@(async () => await ThemingService.ApplyColors(ThemingColors.Eleuthia))" />
<RadzenButton Text="Athenas" Click="@(async () => await ThemingService.ApplyColors(ThemingColors.Athenas))" />

<br />
<br />

<RadzenButton Text="System" Click="@(async () => await ThemingService.ApplySchema(ThemingSchemas.System))" />
<RadzenButton Icon="light_mode" Click="@(async () => await ThemingService.ApplySchema(ThemingSchemas.Light))" />
<RadzenButton Icon="dark_mode" Click="@(async () => await ThemingService.ApplySchema(ThemingSchemas.Dark))" /> *@

@code {

	[Inject] AuthenticationService AuthProvider { get; set; } = default!;

	async Task Logout() => await AuthProvider.LogoutAsync();

	@* private string factor => FormFactor.GetFormFactor(); *@
	@* private string platform => FormFactor.GetPlatform(); *@

}