{
	"version": "2.0.0",
	"tasks": [
		{
			"type": "shell",
			"label": ".NET Build: All Projects",
			"command": "dotnet build",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Build: API Host",
			"command": "dotnet build Apps/Api/Host",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Build: Web Host",
			"command": "dotnet build Apps/Web/Host",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Build: Windows Host",
			"command": "dotnet build Apps/Native/Host -f net9.0-windows10.0.19041.0",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Build: Android Host",
			"command": "dotnet build Apps/Native/Host -f net9.0-android",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: All Projects",
			"command": "dotnet clean && Get-ChildItem -Path ${workspaceFolder}/*/bin -Directory -Recurse -Force | Remove-Item -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: API Host",
			"command": "dotnet clean Apps/Api/Host && Remove-Item ${workspaceFolder}/Apps/Api/Host/bin -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: Web Host",
			"command": "dotnet clean Apps/Web/Host && Remove-Item ${workspaceFolder}/Apps/Web/Host/bin -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: Windows Host",
			"command": "dotnet clean Apps/Native/Host -f net9.0-windows10.0.19041.0 && Remove-Item ${workspaceFolder}/Apps/Native/Host/bin/*/net9.0-windows10.0.19041.0 -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: Android Host",
			"command": "dotnet clean Apps/Native/Host -f net9.0-android && Remove-Item ${workspaceFolder}/Apps/Native/Host/bin/*/net9.0-android -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Watch: API Host",
			"command": "dotnet watch --project Apps/Api/Host",
			"problemMatcher": [],
			"icon": {
				"id": "eye",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Watch: Web Host",
			"command": "dotnet watch --project Apps/Web/Host",
			"problemMatcher": [],
			"icon": {
				"id": "eye",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Watch: Windows Host",
			"command": "dotnet watch --project Apps/Native/Host -f net9.0-windows10.0.19041.0",
			"problemMatcher": [],
			"icon": {
				"id": "eye",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Publish: API Host",
			"command": "dotnet publish Apps/Api/Host -c Release",
			"problemMatcher": [],
			"icon": {
				"id": "server-process",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Publish: Web Host",
			"command": "dotnet publish Apps/Web/Host -c Release",
			"problemMatcher": [],
			"icon": {
				"id": "server-process",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Publish: Windows Host",
			"command": "dotnet publish Apps/Native/Host  -f net9.0-windows10.0.19041.0 -c Release",
			"problemMatcher": [],
			"icon": {
				"id": "server-process",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Publish: Android Host",
			"command": "dotnet publish Apps/Native/Host  -f net9.0-android -c Release",
			"problemMatcher": [],
			"icon": {
				"id": "server-process",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Serve: API Host",
			"command": "dotnet Olympus.Api.Host.dll --urls=https://0.0.0.0:3333",
			"dependsOn": ".NET Publish: API Host",
			"options": {
				"cwd": "${workspaceFolder}/Apps/Api/Host/bin/Release/net9.0/publish"
			},
			"icon": {
				"id": "server-process",
				"color": "terminal.ansiCyan"
			},
			"isBackground": true,
			"problemMatcher": {
				"pattern": [
					{
						"regexp": ".",
						"file": 1,
						"location": 2,
						"message": 3
					}
				],
				"background": {
					"activeOnStart": true,
					"beginsPattern": "info: Microsoft.Hosting.Lifetime",
					"endsPattern": "Application started."
				}
			}
		},
		{
			"type": "shell",
			"label": "Cloudflared: Launch Tunnel",
			"command": "cloudflared tunnel --url https://localhost:3333 run olympus-dev",
			"problemMatcher": [],
			"dependsOn": ".NET Serve: API Host",
			"icon": {
				"id": "globe",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Android: Emulator",
			"command": "emulator -avd pixel_7_-_api_35 -no-snapshot-load -no-metrics",
			"icon": {
				"id": "device-mobile",
				"color": "terminal.ansiWhite"
			},
			"isBackground": true,
			"problemMatcher": {
				"pattern": [
					{
						"regexp": ".",
						"file": 1,
						"location": 2,
						"message": 3
					}
				],
				"background": {
					"activeOnStart": true,
					"beginsPattern": ".*Android emulator.*",
					"endsPattern": ".*Boot completed.*"
				}
			}
		},
		{
			"type": "shell",
			"label": "Android: Install App",
			"command": "dotnet build Apps/Native/Host -t:Install -f net9.0-android",
			"dependsOn": "Android: Emulator",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "device-mobile",
				"color": "terminal.ansiWhite"
			}
		},
		{
			"type": "shell",
			"label": "Android: Launch App",
			"command": "adb shell am start -n 'com.olympus.app/com.olympus.app.MainActivity'",
			"problemMatcher": "$msCompile",
			"dependsOn": "Android: Install App",
			"icon": {
				"id": "device-mobile",
				"color": "terminal.ansiWhite"
			}
		},
		{
			"type": "shell",
			"label": "Android: Stop App",
			"command": "adb shell am force-stop com.olympus.app",
			"problemMatcher": [],
			"icon": {
				"id": "device-mobile",
				"color": "terminal.ansiWhite"
			}
		},
		{
			"type": "shell",
			"label": "Git: Reset Dev from Origin",
			"command": "${input:confirm}git checkout dev && git reset --hard origin/main && git push --force origin dev",
			"problemMatcher": [],
			"icon": {
				"id": "github-inverted",
				"color": "terminal.ansiMagenta"
			}
		},
		{
			"type": "shell",
			"label": "Git: Reset Main from Origin",
			"command": "${input:confirm}git checkout main && git reset --hard origin/main",
			"problemMatcher": [],
			"icon": {
				"id": "github-inverted",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Docker: Compose Up",
			"command": "docker compose up -d",
			"problemMatcher": [],
			"icon": {
				"id": "server",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Docker: Compose Down",
			"command": "${input:confirm}${input:confirm2}docker compose down",
			"problemMatcher": [],
			"icon": {
				"id": "server",
				"color": "terminal.ansiMagenta"
			}
		},
		{
			"type": "shell",
			"label": "Docker: Compose Start",
			"command": "docker compose start",
			"problemMatcher": [],
			"icon": {
				"id": "server",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Docker: Compose Stop",
			"command": "${input:confirm}docker compose stop",
			"problemMatcher": [],
			"icon": {
				"id": "server",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Add Migration",
			"command": "dotnet ef migrations add ${input:migration} --project Apps/Api/Host",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Remove Last Migration",
			"command": "${input:confirm}dotnet ef migrations remove --project Apps/Api/Host",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Update Database",
			"command": "${input:confirm}dotnet ef database update --project Apps/Api/Host",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Rollback Database",
			"command": "${input:confirm}dotnet ef database update ${input:migration} --project Apps/Api/Host",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiMagenta"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Drop Database",
			"command": "${input:confirm}${input:confirm2}dotnet ef database drop --project Apps/Api/Host --force",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiRed"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Clear Migrations",
			"command": "${input:confirm}${input:confirm2}Remove-Item -Path '${workspaceFolder}/Apps/Api/Host/Migrations' -Recurse -Force",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiRed"
			}
		},
		{
			"type": "shell",
			"label": "Solution: Clean All",
			"command": "${input:confirm}Get-ChildItem -Path ${workspaceFolder}/* -Include bin,obj -Directory -Recurse -Force | Remove-Item -Recurse -Force",
			"problemMatcher": [],
			"icon": {
				"id": "symbol-function",
				"color": "terminal.ansiYellow"
			}
		}
	],
	"inputs": [
		{
			"id": "configuration",
			"type": "pickString",
			"description": "Choose configuration:",
			"options": [
				"Debug",
				"Release"
			],
			"default": "Debug"
		},
		{
			"id": "commit",
			"type": "promptString",
			"description": "Enter commit message:"
		},
		{
			"id": "migration",
			"type": "promptString",
			"description": "Enter migration name:"
		},
		{
			"id": "confirm",
			"type": "promptString",
			"description": "Confirm action?"
		},
		{
			"id": "confirm2",
			"type": "promptString",
			"description": "Are you sure?"
		}
	]
}