{
	"version": "2.0.0",
	"tasks": [
		{
			"type": "shell",
			"label": ".NET Build: All Projects",
			"command": "dotnet build",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Build: Aspire Host",
			"command": "dotnet build Aspire/Olympus.Aspire.Host",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Build: API Host",
			"command": "dotnet build Hosts/Olympus.Api.Host",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Build: Web Host",
			"command": "dotnet build Hosts/Olympus.Web.Host",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: All Projects",
			"command": "dotnet clean && Get-ChildItem -Path ${workspaceFolder}/* -Include bin -Directory -Recurse -Force | Remove-Item -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: Aspire Host",
			"command": "dotnet clean Aspire/Olympus.Aspire.Host && Remove-Item ${workspaceFolder}/Hosts/Olympus.Aspire.Host/bin -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: API Host",
			"command": "dotnet clean Hosts/Olympus.Api.Host && Remove-Item ${workspaceFolder}/Hosts/Olympus.Api.Host/bin -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Clean: Web Host",
			"command": "dotnet clean Hosts/Olympus.Web.Host && Remove-Item ${workspaceFolder}/Hosts/Olympus.Web.Host/bin -Recurse -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": ".NET Watch: API Host",
			"command": "dotnet watch --project Hosts/Olympus.Api.Host",
			"problemMatcher": [],
			"icon": {
				"id": "eye",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Watch: Web Host",
			"command": "dotnet watch --project Hosts/Olympus.Web.Host",
			"problemMatcher": [],
			"icon": {
				"id": "eye",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Publish: All Projects",
			"command": "dotnet publish --configuration Release",
			"problemMatcher": [],
			"icon": {
				"id": "server-process",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Publish: API Host",
			"command": "dotnet publish Hosts/Olympus.Api.Host --configuration Release",
			"problemMatcher": [],
			"icon": {
				"id": "server-process",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Publish: Web Host",
			"command": "dotnet publish Hosts/Olympus.Web.Host --configuration Release",
			"problemMatcher": [],
			"icon": {
				"id": "server-process",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Containerize: All Projects",
			"command": "dotnet publish --configuration Release /t:PublishContainer",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Containerize: API Host",
			"command": "dotnet publish Hosts/Olympus.Api.Host --configuration Release /t:PublishContainer",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Containerize: Web Host",
			"command": "dotnet publish Hosts/Olympus.Web.Host --configuration Release /t:PublishContainer",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Pack: All Projects",
			"command": "dotnet pack --configuration Release --output D:/NuGet/Packages",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Pack: SDK Project",
			"command": "dotnet pack Packages/Olympus.Sdk --configuration Release --output D:/NuGet/Packages; Remove-Item ${env:USERPROFILE}/.nuget/packages/olympus.sdk -Recurse -Force -ErrorAction Ignore; dotnet restore",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Pack: Analyzers Project",
			"command": "dotnet pack Packages/Olympus.Analyzers --configuration Release --output D:/NuGet/Packages; Remove-Item ${env:USERPROFILE}/.nuget/packages/olympus.analyzers -Recurse -Force -ErrorAction Ignore; dotnet restore",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Pack: Generators Project",
			"command": "dotnet pack Packages/Olympus.Generators --configuration Release --output D:/NuGet/Packages; Remove-Item ${env:USERPROFILE}/.nuget/packages/olympus.generators -Recurse -Force -ErrorAction Ignore; dotnet restore",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Outdated: List Packages",
			"command": "dotnet outdated",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": ".NET Outdated: Update Packages",
			"command": "dotnet outdated --upgrade:prompt --no-restore",
			"problemMatcher": [],
			"icon": {
				"id": "package",
				"color": "terminal.ansiBlue"
			}
		},
		{
			"type": "shell",
			"label": ".NET Check: Analyzers",
			"command": "dotnet format analyzers --verify-no-changes --severity info",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "file-code",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Check: Code Style",
			"command": "dotnet format style --verify-no-changes --severity info",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "file-code",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Check: Whitespaces",
			"command": "dotnet format whitespace --verify-no-changes",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "file-code",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": ".NET Kill: All Processes",
			"command": "Get-Process dotnet | Stop-Process -Force",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "stop",
				"color": "terminal.ansiRed"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Rebuild Database",
			"command": "${input:confirm}${input:confirm2}if (Test-Path '${workspaceFolder}/Hosts/Olympus.Api.Host/`$Generated') { Remove-Item -Path '${workspaceFolder}/Hosts/Olympus.Api.Host/`$Generated' -Recurse -Force }; dotnet build Hosts/Olympus.Api.Host/Olympus.Api.Host.csproj --configuration Migrations && dotnet ef database drop --project Hosts/Olympus.Api.Host --force --configuration Migrations --no-build && dotnet ef migrations add ${input:migration} --output-dir `$Generated/Migrations --project Hosts/Olympus.Api.Host --configuration Migrations --no-build && dotnet ef dbcontext optimize --output-dir `$Generated/Database --namespace Olympus.Api.Host.Database --project Hosts/Olympus.Api.Host --configuration Migrations --no-build && dotnet ef database update --project Hosts/Olympus.Api.Host --configuration Migrations",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiRed"
			}
		},
		{
			"type": "shell",
			"label": "Aspire: Update",
			"command": "aspire update Aspire/Olympus.Aspire.Host",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "package",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Aspire: Publish",
			"command": "aspire publish Aspire/Olympus.Aspire.Host --output-path Aspire/Olympus.Aspire.Host/`$Publish",
			"problemMatcher": "$msCompile",
			"icon": {
				"id": "file-text",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Git: Reset Dev from Origin/Main",
			"command": "${input:confirm}git checkout dev && git reset --hard origin/main && git push --force origin dev",
			"problemMatcher": [],
			"icon": {
				"id": "github-inverted",
				"color": "terminal.ansiMagenta"
			}
		},
		{
			"type": "shell",
			"label": "Git: Reset Main from Origin/Main",
			"command": "${input:confirm}git checkout main && git reset --hard origin/main",
			"problemMatcher": [],
			"icon": {
				"id": "github-inverted",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Git: All Commits",
			"command": "git --no-pager log --oneline",
			"problemMatcher": [],
			"icon": {
				"id": "github-inverted",
				"color": "terminal.ansiWhite"
			}
		},
		{
			"type": "shell",
			"label": "Git: Unmerged Commits",
			"command": "git --no-pager log --oneline origin/main..HEAD",
			"problemMatcher": [],
			"icon": {
				"id": "github-inverted",
				"color": "terminal.ansiWhite"
			}
		},
		{
			"type": "shell",
			"label": "Git: Squash Merge Dev into Main",
			"command": "${input:confirm}git checkout main && git merge --squash dev",
			"problemMatcher": [],
			"icon": {
				"id": "github-inverted",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Docker: Compose Up",
			"command": "docker compose --env-file .env.Test up --detach",
			"problemMatcher": [],
			"options": {
				"cwd": "${workspaceFolder}/Aspire/Olympus.Aspire.Host/`$Publish"
			},
			"icon": {
				"id": "server",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "Docker: Compose Down",
			"command": "docker compose --env-file .env.Test down",
			"problemMatcher": [],
			"options": {
				"cwd": "${workspaceFolder}/Aspire/Olympus.Aspire.Host/`$Publish"
			},
			"icon": {
				"id": "server",
				"color": "terminal.ansiMagenta"
			}
		},
		{
			"type": "shell",
			"label": "Docker: Push Images",
			"command": "${input:confirm}docker images --format '{{.Repository}}' | ? { $_ -like 'ghcr.io/olympus-app/olympus-*' } | sort -u | % { docker push $_ --all-tags }",
			"problemMatcher": [],
			"icon": {
				"id": "server",
				"color": "terminal.ansiMagenta"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Add Migration",
			"command": "dotnet ef migrations add ${input:migration} --output-dir `$Generated/Migrations --project Hosts/Olympus.Api.Host --configuration Migrations",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Remove Last Migration",
			"command": "${input:confirm}dotnet ef migrations remove --project Hosts/Olympus.Api.Host --configuration Migrations",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Generate Database",
			"command": "${input:confirm}dotnet ef dbcontext optimize --output-dir `$Generated/Database --namespace Olympus.Api.Host.Database --project Hosts/Olympus.Api.Host --configuration Migrations",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Update Database",
			"command": "${input:confirm}dotnet ef database update --project Hosts/Olympus.Api.Host --configuration Migrations",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiCyan"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Rollback Database",
			"command": "${input:confirm}dotnet ef database update ${input:migration} --project Hosts/Olympus.Api.Host --configuration Migrations",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiMagenta"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Drop Database",
			"command": "${input:confirm}${input:confirm2}dotnet ef database drop --project Hosts/Olympus.Api.Host --force --configuration Migrations",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiRed"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Clear Migrations",
			"command": "${input:confirm}${input:confirm2}if (Test-Path '${workspaceFolder}/Hosts/Olympus.Api.Host/`$Generated/Migrations') { Remove-Item -Path '${workspaceFolder}/Hosts/Olympus.Api.Host/`$Generated/Migrations' -Recurse -Force }",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiRed"
			}
		},
		{
			"type": "shell",
			"label": "EF Core: Clear Database",
			"command": "${input:confirm}${input:confirm2}if (Test-Path '${workspaceFolder}/Hosts/Olympus.Api.Host/`$Generated/Database') { Remove-Item -Path '${workspaceFolder}/Hosts/Olympus.Api.Host/`$Generated/Database' -Recurse -Force }",
			"problemMatcher": [],
			"icon": {
				"id": "database",
				"color": "terminal.ansiRed"
			}
		},
		{
			"type": "shell",
			"label": "Solution: Clean Solution",
			"command": "dotnet build-server shutdown; Get-ChildItem -Path ${workspaceFolder} -Include bin,obj -Recurse -Force | Remove-Item -Recurse -Force -ErrorAction Ignore",
			"problemMatcher": [],
			"icon": {
				"id": "trash",
				"color": "terminal.ansiYellow"
			}
		},
		{
			"type": "shell",
			"label": "Solution: Restore Solution",
			"command": "dotnet build-server shutdown; dotnet nuget locals all --clear; dotnet workload restore; dotnet tool restore; dotnet restore",
			"problemMatcher": [],
			"icon": {
				"id": "cloud-download",
				"color": "terminal.ansiBlue"
			}
		},
		{
			"type": "shell",
			"label": "Solution: Rebuild Solution",
			"command": "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue'; dotnet build-server shutdown; Get-ChildItem \"${workspaceFolder}/Packages\" -Directory | ForEach-Object { $pkgCache = Join-Path $Env:UserProfile \".nuget/packages/$($_.Name.ToLower())\"; if (Test-Path $pkgCache) { Remove-Item $pkgCache -Recurse -Force -ErrorAction Ignore }; dotnet pack $_.FullName -c Release -o D:/NuGet/Packages }; dotnet build-server shutdown; dotnet build",
			"problemMatcher": [
				"$msCompile"
			],
			"icon": {
				"id": "tools",
				"color": "terminal.ansiMagenta"
			}
		},
		{
			"type": "shell",
			"label": "Solution: Republish Solution",
			"command": "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue'; dotnet build-server shutdown; Get-ChildItem \"${workspaceFolder}/Packages\" -Directory | ForEach-Object { $pkgCache = Join-Path $Env:UserProfile \".nuget/packages/$($_.Name.ToLower())\"; if (Test-Path $pkgCache) { Remove-Item $pkgCache -Recurse -Force -ErrorAction Ignore }; dotnet pack $_.FullName -c Release -o D:/NuGet/Packages }; dotnet build-server shutdown; dotnet publish",
			"problemMatcher": [
				"$msCompile"
			],
			"icon": {
				"id": "rocket",
				"color": "terminal.ansiGreen"
			}
		},
		{
			"type": "shell",
			"label": "Solution: Repack Solution",
			"command": "$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue'; dotnet build-server shutdown; Get-ChildItem \"${workspaceFolder}/Packages\" -Directory | ForEach-Object { $pkgCache = Join-Path $Env:UserProfile \".nuget/packages/$($_.Name.ToLower())\"; if (Test-Path $pkgCache) { Remove-Item $pkgCache -Recurse -Force -ErrorAction Ignore }; dotnet pack $_.FullName -c Release -o D:/NuGet/Packages }; dotnet build-server shutdown; dotnet pack -c Release -o D:/NuGet/Packages",
			"problemMatcher": [
				"$msCompile"
			],
			"icon": {
				"id": "package",
				"color": "terminal.ansiCyan"
			}
		}
	],
	"inputs": [
		{
			"id": "configuration",
			"type": "pickString",
			"description": "Choose configuration:",
			"options": [
				"Debug",
				"Release"
			],
			"default": "Debug"
		},
		{
			"id": "commit",
			"type": "promptString",
			"description": "Enter commit message:"
		},
		{
			"id": "migration",
			"type": "promptString",
			"description": "Enter migration name:"
		},
		{
			"id": "confirm",
			"type": "promptString",
			"description": "Confirm action?"
		},
		{
			"id": "confirm2",
			"type": "promptString",
			"description": "Are you sure?"
		}
	]
}